 <div class="wishlist-button-wrapper">
  <button 
    class="wishlist-btn" 
    data-product-id="{{ product.id }}"
    data-title="{{ product.title | escape }}"
    data-image="{{ product.featured_image | img_url: '300x' }}"
    data-handle="{{ product.handle }}"
  >
    ‚ù§Ô∏è Add to Wishlist
  </button>
</div>

<style>
  .wishlist-button-wrapper {
  display: flex;
  justify-content: flex-end;
  position: relative;
  top: -20px;   
}

.wishlist-btn {
  padding: 6px 12px;
  font-size: 14px;
  border-radius: 4px;
  border: 1px solid #ccc;
  background: transparent;
  cursor: pointer;
}
</style>

<script>
  function updateWishlistButtons() {
    const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
    document.querySelectorAll(".wishlist-btn").forEach(btn => {
      const id = btn.dataset.productId;
      btn.textContent = wishlist.some(p => p.id == id)
        ? "üíî Remove From Wishlist"
        : "‚ù§Ô∏è Add to Wishlist";
    });
  }

  document.addEventListener("click", (e) => {
    if (e.target.classList.contains("wishlist-btn")) {
      const item = {
        id: e.target.dataset.productId,
        title: e.target.dataset.title,
        image: e.target.dataset.image,
        handle: e.target.dataset.handle
      };

      let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
      const exists = wishlist.find(p => p.id == item.id);

      if (exists) {
        wishlist = wishlist.filter(p => p.id != item.id);
      } else {
        wishlist.push(item);
      }

      localStorage.setItem("wishlist", JSON.stringify(wishlist));
      updateWishlistButtons();
    }
  });

  document.addEventListener("DOMContentLoaded", updateWishlistButtons);
</script>

{% schema %}
{
  "name": "Wishlist Button",
  "target": "section",
  "settings": []
}
{% endschema %} 
